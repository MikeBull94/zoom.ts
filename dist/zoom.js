/*
 zoom.ts v7.5.0
 https://www.michael-bull.com/projects/zoom.ts

 Copyright (c) 2017 Michael Bull (https://www.michael-bull.com)
 @license ISC
*/
'use strict';(function(){function H(a,b){a=a.getAttribute("data-"+b);return null===a||(a=Number(a),isNaN(a))?Infinity:a}function U(a){"function"!==typeof a.preventDefault&&(a.preventDefault=function(){a.returnValue=!1});"function"!==typeof a.stopPropagation&&(a.stopPropagation=function(){a.cancelBubble=!0});if("mouseover"===a.type){var b=a;void 0===b.relatedTarget&&void 0!==b.fromElement&&(b.relatedTarget=b.fromElement)}else"mouseout"===a.type&&(b=a,void 0===b.relatedTarget&&void 0!==b.toElement&&
(b.relatedTarget=b.toElement));return a}function u(a,b){"function"===typeof a?a(b):a.handleEvent(b)}function t(a,b,d,c){function e(a){if(void 0===a)if(void 0!==window.event)a=window.event;else throw Error("No current event to handle.");u(d,U(a))}void 0===c&&(c=!1);var h=a.addEventListener,f=a.attachEvent;if("function"===typeof h)return h.call(a,b,e,c),e;if("function"===typeof f&&f.call(a,"on"+b,e))return e}function w(a,b,d){var c;void 0===c&&(c=!1);var e=t(a,b,function(c){void 0!==e&&m(a,b,e);u(d,
c)},c);return e}function m(a,b,d){var c=a.removeEventListener,e=a.detachEvent;"function"===typeof c?c.call(a,b,d):"function"===typeof e&&e.call(a,b,d)}function V(a){var b=document;"complete"===b.readyState?a():w(b,"DOMContentLoaded",function(){return a()})}function I(){var a=document,a="CSS1Compat"===a.compatMode?a.documentElement:a.body;return[a.clientWidth,a.clientHeight]}function J(a){var b=document.createElement("div");b.className=a;return b}function n(a,b){return{position:a,size:b}}function K(a){a=
a.getBoundingClientRect();return n(A(a),[a.width,a.height])}function B(a,b,d,c,e){a.left=b;a.top=d;a.width=c;a.maxWidth=c;a.height=e}function x(a,b){var d=b.position;b=b.size;B(a,d[0]+"px",d[1]+"px",b[0]+"px",b[1]+"px")}function y(a,b){var d=I(),c;c=b.size;a=L([Math.min(d[0],a[0]),Math.min(d[1],a[1])],b.size);c=[c[0]*a,c[1]*a];return{position:M(d,n(b.position,c)),size:c}}function A(a){return[a.left,a.top]}function C(a,b){return[a[0]/b,a[1]/b]}function D(a,b){return[a[0]-b[0],a[1]-b[1]]}function L(a,
b){a=[a[0]/b[0],a[1]/b[1]];return Math.min(a[0],a[1])}function M(a,b){return D(C(D(a,b.size),2),b.position)}function E(a,b,d,c){var e;e=I();d=L([Math.min(e[0],d[0]),Math.min(e[1],d[1])],c.size);var h;h=c.size;h=[h[0]*d,h[1]*d];var f=c.position;c=C(D(c.size,h),2);e=C(M(e,n([f[0]+c[0],f[1]+c[1]],h)),d);b.style[a.f]=a.l?"scale("+d+") "+("translate3d("+e[0]+"px, "+e[1]+"px, 0)"):"scale("+d+") "+("translate("+e[0]+"px, "+e[1]+"px)")}function N(a,b,d){a.style[b]="initial";d();a.offsetHeight;a.style[b]=
""}function W(a){var b=""+a.charAt(0).toUpperCase()+a.substr(1),d=X.map(function(a){return""+a+b});return[a].concat(d)}function O(a,b){var d=0;for(b=W(b);d<b.length;d++){var c=b[d];if(c in a)return c}}function P(a,b,d){return 0<a.length&&d.indexOf(a)===b}function Y(a){return function(b,d,c){return b!==a&&P(b,d,c)}}function q(a,b){return-1!==a.className.indexOf(b)}function r(a,b){a.className=a.className.split(" ").concat(b).filter(P).join(" ")}function k(a,b){a.className=a.className.split(" ").filter(Y(b)).join(" ")}
function Q(a){r(a,"zoom__element--active")}function F(a,b){a=a.getAttribute("data-src");return null===a?b.src:a}function Z(a){var b=document.createElement("img");b.className="zoom__clone";b.src=a;w(b,"load",function(){return r(b,"zoom__clone--loaded")});return b}function aa(a){return function(){void 0!==a.clone&&q(a.b,"zoom--expanded")&&!q(a.clone,"zoom__clone--visible")&&z(a.c,a.clone)}}function v(a){return q(a,"zoom__clone--loaded")}function z(a,b){r(b,"zoom__clone--visible");r(a,"zoom__element--hidden")}
function ba(a,b){k(a,"zoom__element--hidden");k(b,"zoom__clone--visible")}function R(){var a=window;void 0===a.pageYOffset?(a=a.document,a=("CSS1Compat"===a.compatMode?a.documentElement:a.body).scrollTop):a=a.pageYOffset;return a}function ca(a){return function(b){27===b.keyCode&&(b.preventDefault(),b.stopPropagation(),u(a,b))}}function da(a,b,d,c){return function(e){Math.abs(a-d())>=b&&u(c,e)}}function S(a,b,d){var c=R();console.log("window "+window);var e=t(window,"scroll",da(c,a.m,function(){return R()},
d)),h=t(document,"keyup",ca(d)),f=t(b,"click",d);return function(){m(window,"scroll",e);m(document,"keyup",h);m(b,"click",f)}}function G(a,b){void 0!==b.clone&&ba(b.c,b.clone);k(b.c,"zoom__element--active");document.body.removeChild(b.h);k(b.b,"zoom--collapsing");b.b.style.height="";setTimeout(function(){return T(a)},1)}function ea(a,b,d,c){var e=K(b.c),h=t(window,"resize",function(){var a=A(b.b.getBoundingClientRect());e=n(a,e.size);x(b.a.style,y(d,e))}),f;f=S(a,b.a,function(){f();m(window,"resize",
h);void 0===b.clone||void 0===c||v(b.clone)||m(b.clone,"load",c);k(b.b,"zoom--expanded");B(b.a.style,"","","","");G(a,b)});r(b.b,"zoom--expanded");b.b.style.height=b.c.height+"px";Q(b.c);x(b.a.style,y(d,e))}function fa(a,b,d,c,e){function h(){void 0!==b.clone&&v(b.clone)&&!q(b.clone,"zoom__clone--visible")&&(void 0!==c&&m(b.clone,e.g,c),z(b.c,b.clone));k(b.b,"zoom--expanding");r(b.b,"zoom--expanded");N(b.a,e.transitionProperty,function(){b.a.style[e.f]="";x(b.a.style,y(d,f))})}var f=K(b.c),g=t(window,
"resize",function(){var a=A(b.b.getBoundingClientRect());f=n(a,f.size);a=b.b;q(a,"zoom--expanding")||q(a,"zoom--collapsing")?E(e,b.a,d,f):x(b.a.style,y(d,f))}),l,p;p=S(a,b.a,function(){p();m(window,"resize",g);void 0===b.clone||void 0===c||v(b.clone)||m(b.clone,"load",c);k(b.h,"zoom__overlay--visible");r(b.b,"zoom--collapsing");var h=w(b.a,e.g,function(){G(a,b)});q(b.b,"zoom--expanding")?(void 0!==l&&m(b.a,e.g,l),b.a.style[e.f]="",k(b.b,"zoom--expanding")):(N(b.a,e.transitionProperty,function(){E(e,
b.a,d,f)}),b.a.style[e.f]="",B(b.a.style,"","","",""),k(b.b,"zoom--expanded"));void 0===h&&G(a,b)});r(b.b,"zoom--expanding");b.b.style.height=b.c.height+"px";Q(b.c);l=w(b.a,e.g,function(){return h()});void 0===l?h():E(e,b.a,d,f)}function T(a){var b=t(document.body,"click",function(d){var c=d.target;if(c instanceof HTMLImageElement&&null!==c.parentElement&&null!==c.parentElement&&null!==c.parentElement.parentElement&&q(c,"zoom__element")){d.preventDefault();d.stopPropagation();var e=b,c=d.target,h=
c.parentElement,f=q(h,"zoom__container"),h=f?h.parentElement:h;if(d.metaKey||d.ctrlKey)window.open(F(h,c),"_blank");else{void 0!==e&&m(document.body,"click",e);var g;d=J("zoom__overlay");document.body.appendChild(d);d.offsetHeight;r(d,"zoom__overlay--visible");if(f){g=c.parentElement;var f=g.parentElement,l;F(f,c)!==c.src&&(l=g.children.item(1));g={h:d,b:f,a:g,c:c,clone:l};void 0!==g.clone&&v(g.clone)&&z(c,g.clone)}else l=J("zoom__container"),f=c.parentElement,e=F(f,c),e!==c.src&&(g=Z(e)),g={h:d,
b:f,a:l,c:c,clone:g},g.b.replaceChild(g.a,c),g.a.appendChild(c),void 0!==g.clone&&g.a.appendChild(g.clone);l=void 0;void 0!==g.clone&&(v(g.clone)?z(c,g.clone):l=t(g.clone,"load",aa(g)));var c=g.b,c=[H(c,"width"),H(c,"height")],p,f=document.body.style;d=O(f,"transform");f=O(f,"transition");e=!1;void 0!==d&&(e=!0);h=!1;void 0!==f&&(p=ga[f],h=void 0!==p);var k=!1;if(void 0!==d){var n=window.getComputedStyle,u=ha[d];"function"===typeof n&&void 0!==u?(k=document.createElement("p"),k.style[d]="translate3d(1px,1px,1px)",
document.body.appendChild(k),n=n(k).getPropertyValue(u),document.body.removeChild(k),k=0<n.length&&"none"!==n):k=!1}p={f:d,transitionProperty:f,g:p,i:e,j:h,l:k};p.i&&p.j?fa(a,g,c,l,p):ea(a,g,c,l)}}})}var ha={WebkitTransform:"-webkit-transform",MozTransform:"-moz-transform",msTransform:"-ms-transform",OTransform:"-o-transform",transform:"transform"},ga={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},
X=["Webkit","Moz","ms","O"];(function(a){void 0===a&&(a={m:50});V(function(){return T(a)})})()})();
