(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.zoom = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.zoom=e()}}(function(){return function e(t,n,o){function i(s,d){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!d&&u)return u(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){"use strict";var o=e("./element/ZoomedImageElement"),i=e("./element/ZoomedVideoElement"),r=e("./util/Attributes"),s=e("./util/Classes"),d=e("./util/Dimensions"),u=27,c=70,l=30,a=document.createElement("div");a.className=s.OVERLAY_CLASS;var m=function(){function e(){var e=this;this.scrollListener=function(){Math.abs(e._initialScrollY-d.Dimensions.scrollY())>c&&e.close()},this.keyboardListener=function(t){t.keyCode===u&&e.close()},this.touchStartListener=function(t){e._initialTouchY=t.touches[0].pageY,t.target.addEventListener("touchmove",e.touchMoveListener)},this.touchMoveListener=function(t){Math.abs(t.touches[0].pageY-e._initialTouchY)>l&&(e.close(),t.target.removeEventListener("touchmove",e.touchMoveListener))}}return e.ready=function(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){e()}):e()},e.prototype.listen=function(){var t=this;e.ready(function(){document.body.addEventListener("click",function(e){var n=e.target;n.getAttribute(r.ZOOM_FUNCTION_KEY)===r.ZOOM_IN_VALUE?t.zoom(e):n.getAttribute(r.ZOOM_FUNCTION_KEY)===r.ZOOM_OUT_VALUE&&t.close()}),document.body.appendChild(a)})},e.prototype.zoom=function(e){e.stopPropagation();var t=document.body.classList;if(!t.contains(s.OVERLAY_OPEN_CLASS)&&!t.contains(s.OVERLAY_LOADING_CLASS)){var n=e.target;if(e.metaKey||e.ctrlKey){var u=n.getAttribute(r.FULL_SRC_KEY)||n.currentSrc||n.src;return void window.open(u,"_blank")}n.width>=window.innerWidth||("IMG"===n.tagName||"PICTURE"===n.tagName?this._current=new o.ZoomedImageElement(n):this._current=new i.ZoomedVideoElement(n),this._current.open(),this.addCloseListeners(),this._initialScrollY=d.Dimensions.scrollY())}},e.prototype.close=function(){this._current&&(this._current.close(),this.removeCloseListeners(),this._current=void 0)},e.prototype.addCloseListeners=function(){window.addEventListener("scroll",this.scrollListener),document.addEventListener("keyup",this.keyboardListener),document.addEventListener("touchstart",this.touchStartListener)},e.prototype.removeCloseListeners=function(){window.removeEventListener("scroll",this.scrollListener),document.removeEventListener("keyup",this.keyboardListener),document.removeEventListener("touchstart",this.touchStartListener)},e}();n.Zoom=m},{"./element/ZoomedImageElement":3,"./element/ZoomedVideoElement":4,"./util/Attributes":6,"./util/Classes":7,"./util/Dimensions":8}],2:[function(e,t,n){"use strict";var o=e("../util/Attributes"),i=e("../util/Classes"),r=e("../util/Dimensions"),s=e("../util/Style"),d=document.createElement("div");d.className=i.WRAP_CLASS;var u=function(){function e(t){var n=this;this.openedListener=function(){e.removeTransitionEndListener(n._element,n.openedListener),document.body.classList.remove(i.OVERLAY_TRANSITIONING_CLASS)},this.closedListener=function(){e.removeTransitionEndListener(n._element,n.closedListener),d.parentNode&&(n._element.setAttribute(o.ZOOM_FUNCTION_KEY,o.ZOOM_IN_VALUE),d.parentNode.replaceChild(n._element,d),document.body.classList.remove(i.OVERLAY_TRANSITIONING_CLASS),n.zoomedOut())},this._fullSrc=t.getAttribute(o.FULL_SRC_KEY)||t.currentSrc||t.src,this._element=t}return e.addTransitionEndListener=function(e,t){"transition"in document.body.style?(e.addEventListener("transitionend",t),e.addEventListener("webkitTransitionEnd",t)):t(void 0)},e.removeTransitionEndListener=function(e,t){e.removeEventListener("transitionend",t),e.removeEventListener("webkitTransitionEnd",t)},e.prototype.open=function(){document.body.classList.add(i.OVERLAY_LOADING_CLASS),this.zoomedIn(),this._element.src=this._fullSrc,e.addTransitionEndListener(this._element,this.openedListener)},e.prototype.close=function(){var t=document.body.classList;t.remove(i.OVERLAY_OPEN_CLASS),t.add(i.OVERLAY_TRANSITIONING_CLASS),s.Style.transform(this._element,""),s.Style.transform(d,""),e.addTransitionEndListener(this._element,this.closedListener)},e.prototype.loaded=function(e,t){var n=document.body.classList;n.remove(i.OVERLAY_LOADING_CLASS),n.add(i.OVERLAY_TRANSITIONING_CLASS),n.add(i.OVERLAY_OPEN_CLASS),this._element.parentNode.insertBefore(d,this._element),d.appendChild(this._element),this._element.setAttribute(o.ZOOM_FUNCTION_KEY,o.ZOOM_OUT_VALUE),this.scaleElement(e,t),this.translateWrap()},e.prototype.repaint=function(){this._element.offsetWidth},e.prototype.scaleElement=function(e,t){this.repaint();var n,o=r.Dimensions.viewportWidth(),i=r.Dimensions.viewportHeight(),d=o/i,u=e/this.width(),c=e/t;n=e<o&&t<i?u:c<d?i/t*u:o/e*u,s.Style.transform(this._element,"scale("+n+")")},e.prototype.translateWrap=function(){this.repaint();var e=r.Dimensions.scrollX(),t=r.Dimensions.scrollY(),n=r.Dimensions.viewportWidth(),o=r.Dimensions.viewportHeight(),i=n/2,u=t+o/2,c=this._element,l=c.getBoundingClientRect(),a=l.left+e+(c.width||c.offsetWidth)/2,m=l.top+t+(c.height||c.offsetHeight)/2,f=Math.round(i-a),h=Math.round(u-m);s.Style.transform(d,"translate("+f+"px, "+h+"px) translateZ(0)")},e}();n.ZoomedElement=u},{"../util/Attributes":6,"../util/Classes":7,"../util/Dimensions":8,"../util/Style":9}],3:[function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../util/Attributes"),r=e("./ZoomedElement"),s=function(e){function t(t){e.call(this,t),this._image=t}return o(t,e),t.prototype.zoomedIn=function(){var e=this,t=document.createElement("img");t.onload=function(){e.loaded(t.width,t.height),e._image.removeAttribute(i.FULL_SRC_KEY)},t.src=this._fullSrc},t.prototype.zoomedOut=function(){},t.prototype.width=function(){return this._image.width},t}(r.ZoomedElement);n.ZoomedImageElement=s},{"../util/Attributes":6,"./ZoomedElement":2}],4:[function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("../util/Attributes"),r=e("./ZoomedElement"),s=function(e){function t(t){e.call(this,t),this._video=t}return o(t,e),t.prototype.zoomedIn=function(){var e=this,t=document.createElement("video"),n=document.createElement("source");t.appendChild(n),t.addEventListener("canplay",function(){e.loaded(t.videoWidth,t.videoHeight),e._video.play()}),n.src=this._fullSrc},t.prototype.zoomedOut=function(){this._video.getAttribute(i.PLAY_VIDEO_KEY)===i.ALWAYS_PLAY_VIDEO_VALUE&&this._video.play()},t.prototype.width=function(){return this._video.width||this._video.videoWidth},t}(r.ZoomedElement);n.ZoomedVideoElement=s},{"../util/Attributes":6,"./ZoomedElement":2}],5:[function(e,t,n){"use strict";var o=e("./Zoom");n.Zoom=o.Zoom},{"./Zoom":1}],6:[function(e,t,n){"use strict";n.ZOOM_FUNCTION_KEY="data-zoom",n.ZOOM_IN_VALUE="zoom-in",n.ZOOM_OUT_VALUE="zoom-out",n.FULL_SRC_KEY="data-zoom-src",n.PLAY_VIDEO_KEY="data-zoom-play",n.ALWAYS_PLAY_VIDEO_VALUE="always"},{}],7:[function(e,t,n){"use strict";n.OVERLAY_CLASS="zoom-overlay",n.OVERLAY_OPEN_CLASS="zoom-overlay-open",n.OVERLAY_LOADING_CLASS="zoom-overlay-loading",n.OVERLAY_TRANSITIONING_CLASS="zoom-overlay-transitioning",n.WRAP_CLASS="zoom-wrap"},{}],8:[function(e,t,n){"use strict";var o=function(){function e(){}return e.scrollX=function(){return void 0===window.pageXOffset?(document.documentElement||document.body).scrollLeft:window.pageXOffset},e.scrollY=function(){return void 0===window.pageYOffset?(document.documentElement||document.body).scrollTop:window.pageYOffset},e.viewportWidth=function(){return void 0===window.innerWidth?(document.documentElement||document.body).clientWidth:window.innerWidth},e.viewportHeight=function(){return void 0===window.innerHeight?(document.documentElement||document.body).clientHeight:window.innerHeight},e}();n.Dimensions=o},{}],9:[function(e,t,n){"use strict";var o=function(){function e(){}return e.transform=function(e,t){e.style.webkitTransform=t,e.style.transform=t},e}();n.Style=o},{}]},{},[5])(5)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}]},{},[1])(1)
});

